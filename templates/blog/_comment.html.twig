<div class="comment mb-3 {% if comment.isReply %}ms-5{% endif %}" id="comment-{{ comment.id }}">
    <div class="card">
        <div class="card-body">
            <div class="d-flex justify-content-between align-items-start mb-2">
                <div>
                    {% if comment.author.avatar %}
                        <img src="/uploads/avatars/{{ comment.author.avatar }}"
                             style="width:32px;height:32px;border-radius:50%;object-fit:cover;margin-right:8px;vertical-align:middle;">
                    {% endif %}
                    <strong>{{ comment.author.username }}</strong>
                    <small class="text-muted">{{ comment.createdAt|date('d.m.Y H:i') }}</small>
                </div>
                <div>
                    {% if app.user and (comment.author == app.user or blog.author == app.user) %}
                        <form method="post" action="{{ path('comment_delete', {'id': comment.id}) }}" style="display: inline;">
                            <input type="hidden" name="_method" value="DELETE">
                            <button type="submit" class="btn btn-sm btn-link text-danger p-0"
                                    onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?');"
                                    title="–£–¥–∞–ª–∏—Ç—å">
                                üóëÔ∏è
                            </button>
                        </form>
                    {% endif %}
                </div>
            </div>

            <p class="mb-2">{{ comment.content|nl2br }}</p>

            {# –í–ª–æ–∂–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è #}
            {% if commentAttachments[comment.id] is defined and commentAttachments[comment.id]|length > 0 %}
                <div class="mt-2">
                    {% for attachment in commentAttachments[comment.id] %}
                        <span class="badge bg-light text-dark me-1">
                            {{ attachment.icon }}
                            <a href="/uploads/attachments/{{ attachment.filename }}" target="_blank" class="text-dark">
                                {{ attachment.originalFilename }}
                            </a>
                            <small class="text-muted">({{ attachment.fileSizeFormatted }})</small>
                        </span>
                    {% endfor %}
                </div>
            {% endif %}

            {# –ö–Ω–æ–ø–∫–∞ "–û—Ç–≤–µ—Ç–∏—Ç—å" #}
            {% if app.user %}
                <button type="button" class="btn btn-sm btn-link p-0 mt-2"
                        onclick="toggleReplyForm('{{ comment.id }}')">
                    üí¨ –û—Ç–≤–µ—Ç–∏—Ç—å
                </button>
            {% endif %}
        </div>
    </div>

    {# –§–æ—Ä–º–∞ –æ—Ç–≤–µ—Ç–∞ (—Å–∫—Ä—ã—Ç–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) - –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Å—Ç—É—é HTML —Ñ–æ—Ä–º—É –≤–º–µ—Å—Ç–æ Symfony Form #}
    {% if app.user %}
        {{ include('blog/_reply_form.html.twig', {'comment': comment}) }}
    {% endif %}

    {# –û—Ç–≤–µ—Ç—ã –Ω–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π #}
    {% if commentReplies[comment.id] is defined and commentReplies[comment.id]|length > 0 %}
        <div class="replies ms-5 mt-2">
            {% for reply in commentReplies[comment.id] %}
                {{ include('blog/_comment.html.twig', {
                    'comment': reply,
                    'blog': blog,
                    'commentAttachments': commentAttachments,
                    'commentReplies': commentReplies
                }) }}
            {% endfor %}
        </div>
    {% endif %}
</div>